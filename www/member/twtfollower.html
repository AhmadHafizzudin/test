<!DOCTYPE html>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Get twitter followers list with each followers count using JQuery-JSON</title>
     
	 <script type="text/javascript" src="../assets/js/jquery-2.2.3.js"></script>
     
     <script type="text/javascript">

	function getUsers(){
		var limit=25;
	    	$.ajax({
	        	url: 'https://api.twitter.com/1.1/followers/list.json',
		   	data: {screen_name: 'sangwira91', cursor:-1},
	        	dataType: 'jsonp',
	        	success: function(data) { 
					if (data.length > 0 ){
						try {
							
							for(i=0; i<limit; i++){ //*********************************
							  $.ajax({
								
								url: 'https://api.twitter.com/1.1/users/lookup.json',
								data: {user_id: data.ids[i],include_entities:1},
								dataType: 'jsonp',
								success: function(userData) { //*********
									if (userData.length > 0 ){ 
										try {
											//alert(userData[0].screen_name);
											$('#followersList').append('<iframe allowtransparency="true" frameborder="0" scrolling="no" '+'src="//platform.twitter.com/widgets/follow_button.html?screen_name=' +userData[0].screen_name + '"' + 'style="width:300px; height:20px;" class="followerButton"></iframe></br>');
										} 
										catch (e) {
											alert(e);
										}
									}
	
								} // End success 2 ***********************
							  }); // End Ajax 2
							} // End for loop ******************************************
							
						} ///end try {
						 catch (e) {
							alert(e);
						}	
					} //if (userData.length > 0 ){
	             } // End success 1-----------------------------------------------------
				  
	    }); // End Ajax 1

	} // End of the getUsers function
		
		
		$(document).ready(function() {
 	 		getUsers();
		});

	</script>
    
	<style type="text/css">
	
		div#followersList {
			margin: 100px auto 0;
			width: 400px;
		}
		
		iframe {
			display: block;
		}
	
	</style>
    
</head>

<body>
	<div id="followersList"></div>
</body>
</html>